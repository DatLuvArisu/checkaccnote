-- ✅ Account UI + Note + Auto Save + Toggle G + Ẩn/Hiện cuộn lên + Căn vừa Frame
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- UI Container
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "AccountNoteUI"
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui

-- FRAME GỌN GÀNG
local frame = Instance.new("Frame")
frame.Name = "MainFrame"
frame.Size = UDim2.new(0, 180, 0, 130)   -- ✅ khung nhỏ đẹp
frame.AnchorPoint = Vector2.new(0.5, 0)
frame.Position = UDim2.new(0.5, 0, 0, 40)
frame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
frame.BorderSizePixel = 0
frame.ZIndex = 999999
frame.Active = true
frame.Draggable = true
frame.Parent = screenGui

Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 10)
local stroke = Instance.new("UIStroke", frame)
stroke.Color = Color3.fromRGB(180, 180, 180)
stroke.Thickness = 1

-- TEXT: "Account"
local labelText = Instance.new("TextLabel", frame)
labelText.Text = "Account:"
labelText.Size = UDim2.new(1, -20, 0, 20)
labelText.Position = UDim2.new(0, 10, 0, 10)
labelText.BackgroundTransparency = 1
labelText.TextColor3 = Color3.fromRGB(70, 70, 70)
labelText.Font = Enum.Font.GothamBold
labelText.TextSize = 14
labelText.TextXAlignment = Enum.TextXAlignment.Left

-- ACCOUNT NAME
local nameText = Instance.new("TextLabel", frame)
nameText.Text = player.Name
nameText.Size = UDim2.new(1, -20, 0, 22)
nameText.Position = UDim2.new(0, 10, 0, 30)
nameText.BackgroundTransparency = 1
nameText.TextColor3 = Color3.fromRGB(90, 120, 255)
nameText.Font = Enum.Font.GothamBold
nameText.TextSize = 18
nameText.TextXAlignment = Enum.TextXAlignment.Left

-- TEXT: "Note"
local noteLabel = Instance.new("TextLabel", frame)
noteLabel.Text = "Note:"
noteLabel.Size = UDim2.new(1, -20, 0, 18)
noteLabel.Position = UDim2.new(0, 10, 0, 60) -- ✅ đưa lên sát, không bị thấp quá
noteLabel.BackgroundTransparency = 1
noteLabel.TextColor3 = Color3.fromRGB(90, 90, 90)
noteLabel.Font = Enum.Font.GothamBold
noteLabel.TextSize = 14
noteLabel.TextXAlignment = Enum.TextXAlignment.Left

-- NOTE BOX
local noteBox = Instance.new("TextBox", frame)
noteBox.Size = UDim2.new(1, -20, 0, 50)
noteBox.Position = UDim2.new(0, 10, 0, 80)
noteBox.BackgroundColor3 = Color3.fromRGB(240, 240, 240)
noteBox.TextColor3 = Color3.fromRGB(30, 30, 30)
noteBox.Font = Enum.Font.Gotham
noteBox.TextSize = 13
noteBox.TextWrapped = true
noteBox.PlaceholderText = "Ghi chú..."
noteBox.ClearTextOnFocus = false
Instance.new("UICorner", noteBox).CornerRadius = UDim.new(0, 8)

-- ✅ AUTO SAVE NOTE
local fileName = "note_" .. player.Name .. ".txt"
if isfile and isfile(fileName) then
	noteBox.Text = readfile(fileName)
end

noteBox.FocusLost:Connect(function()
	if writefile then writefile(fileName, noteBox.Text) end
end)

-- ✅ EFFECT APPEAR
frame.Position = UDim2.new(0.5, 0, -0.3, 0)
TweenService:Create(frame, TweenInfo.new(0.4), {
	Position = UDim2.new(0.5, 0, 0, 40)
}):Play()

-- ✅ ẨN/HIỆN BẰNG PHÍM G (cuộn lên)
local visible = true
local busy = false

local function toggleUI()
	if busy then return end
	busy = true
	visible = not visible

	if not visible then
		TweenService:Create(frame, TweenInfo.new(0.4), {
			Position = UDim2.new(0.5, 0, -0.3, 0)
		}):Play()
		task.wait(0.4)
		frame.Visible = false
	else
		frame.Visible = true
		frame.Position = UDim2.new(0.5, 0, -0.3, 0)
		TweenService:Create(frame, TweenInfo.new(0.4), {
			Position = UDim2.new(0.5, 0, 0, 40)
		}):Play()
		task.wait(0.4)
	end

	busy = false
end

UserInputService.InputBegan:Connect(function(i, g)
	if not g and i.KeyCode == Enum.KeyCode.G then
		toggleUI()
	end
end)
